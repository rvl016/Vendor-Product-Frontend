(this["webpackJsonpvendor-product-frontend"]=this["webpackJsonpvendor-product-frontend"]||[]).push([[0],{101:function(e,t,r){e.exports=r(123)},106:function(e,t,r){},110:function(e,t,r){},114:function(e,t,r){},115:function(e,t,r){},116:function(e,t,r){},117:function(e,t,r){},118:function(e,t,r){},119:function(e,t,r){},120:function(e,t,r){},121:function(e,t,r){},122:function(e,t,r){},123:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(15),c=r.n(o),s=(r(106),r(16)),u=r(12),i=r(19),l=r(18),d=r(67),_=r(17),p=r(170),m=r(156),f=r(157),g=r(124),h=r(152),v=function(e){return a.a.createElement(h.a,{tag:e.tag,disabled:e.disabled,edge:"start",className:"action-button",color:"inherit",onClick:e.onClick},a.a.createElement(g.a,null,e.tag))},b=(r(110),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={view_name:null},n}return Object(u.a)(r,[{key:"componentWillReceiveProps",value:function(e){var t=e.view_name;this.setState({view_name:t})}},{key:"render",value:function(){var e=this;return a.a.createElement(m.a,{position:"sticky",color:"primary",className:"app-bar"},a.a.createElement(f.a,{className:"tool-bar",variant:"dense"},a.a.createElement(g.a,{variant:"h6"},this.state.view_name),a.a.createElement("div",{className:"app-bar-buttons"},a.a.createElement("div",null,a.a.createElement(v,{tag:"All Vendors",onClick:function(){return e.props.history.push("/vendors")},disabled:"Vendors View"===this.state.view_name})))))}}]),r}(a.a.Component)),k=Object(_.g)(b),E=r(9),y=r(7),O=r(6),j=r.n(O),w=r(10),x=r(172),C=r(173),S=r(125),P=(r(114),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).toggle_create_dialog=e.toggle_create?e.toggle_create:null,n.toggle_delete_dialog=e.toggle_delete?e.toggle_delete:null,n.toggle_modify_dialog=e.toggle_modify?e.toggle_modify:null,n.state={number_selected:0},n}return Object(u.a)(r,[{key:"componentWillReceiveProps",value:function(e){this.setState({number_selected:e.number_selected})}},{key:"render",value:function(){return a.a.createElement("div",{className:"control-bar"},a.a.createElement("div",{className:"buttons"},a.a.createElement("div",{id:"create-button"},a.a.createElement(v,{tag:"New",onClick:this.toggle_create_dialog})),a.a.createElement("div",{id:"modify-button"},a.a.createElement(v,{tag:"Modify",disabled:1!==this.state.number_selected,onClick:this.toggle_modify_dialog})),a.a.createElement("div",{id:"delete-button"},a.a.createElement(v,{tag:"Delete",disabled:0===this.state.number_selected,onClick:this.toggle_delete_dialog}))),a.a.createElement("div",{className:"selected-div"},a.a.createElement("p",{className:"selected-field"},"Selected: ",this.state.number_selected)))}}]),r}(a.a.Component)),q=r(158),N=r(159),T=r(160),V=r(176),A=(r(115),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).on_submit=Object(w.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.submit();case 2:if(200!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",n.on_toggle());case 5:console.log("DELETE request failed! Response:"),console.log(t);case 7:case"end":return e.stop()}}),e)}))),n.state={number_selected:n.props.number_selected,open:n.props.open},n.on_toggle=e.on_toggle,n.submit=e.on_submit,n}return Object(u.a)(r,[{key:"componentWillReceiveProps",value:function(e){this.setState({number_selected:e.number_selected,open:e.open})}},{key:"render",value:function(){return a.a.createElement(V.a,{disableBackdropClick:!0,open:this.state.open,onClose:this.on_toggle},a.a.createElement(q.a,null,"Confirm Deletion"),a.a.createElement(N.a,null,a.a.createElement("h4",null,"Are you sure you want to delete ",this.state.number_selected," entries?")),a.a.createElement(T.a,null,a.a.createElement(h.a,{onClick:this.on_toggle},"Cancel"),a.a.createElement(h.a,{onClick:this.on_submit},"DELETE")))}}]),r}(a.a.Component)),R=function(e){return Object.keys(e).reduce((function(t,r){return Object(y.a)(Object(y.a)({},null!==e[r]&&""!==e[r]&&Object(E.a)({},r,e[r])),t)}),{})},W={name:"",code:"",price:null},D={name:{error:!1,message:null},code:{error:!1,message:null},price:{error:!1,message:null},__all__:{error:!1,message:null}},B=function(e){return a.a.createElement("div",{className:"product-form form",key:e.index},a.a.createElement("div",null,a.a.createElement(C.a,{defaultValue:e.default?e.default.name:null,error:e.errors.name.error,margin:"none",id:"name",label:"Name",type:"name",variant:"filled",required:!0,onChange:e.on_change("name"),helperText:e.errors.name.message})),a.a.createElement("div",null,a.a.createElement(C.a,{defaultValue:e.default?e.default.code:null,error:e.errors.code.error||e.errors.__all__.error,margin:"none",id:"username",label:"UPC-A code",type:"string",variant:"filled",required:!0,onChange:e.on_change("code"),helperText:e.errors.code.message||e.errors.__all__.message})),a.a.createElement("div",null,a.a.createElement(C.a,{defaultValue:e.default?e.default.price:null,error:e.errors.price.error,margin:"none",id:"price",label:"Price",type:"number",variant:"filled",onChange:e.on_change("price"),helperText:e.errors.price.message})))},F={name:"",cnpj:"",city:""},L={name:{error:!1,message:null},cnpj:{error:!1,message:null},city:{error:!1,message:null}},M=function(e){return a.a.createElement("div",{className:"vendor-form form"},a.a.createElement("div",null,a.a.createElement(C.a,{defaultValue:e.default?e.default.name:null,error:e.errors.name.error,margin:"none",id:"name",label:"Name",type:"name",variant:"filled",required:!0,onChange:e.on_change("name"),helperText:e.errors.name.message})),a.a.createElement("div",null,a.a.createElement(C.a,{defaultValue:e.default?e.default.cnpj:null,error:e.errors.cnpj.error,margin:"none",id:"username",label:"CNPJ",type:"string",variant:"filled",required:!0,onChange:e.on_change("cnpj"),helperText:e.errors.cnpj.message})),a.a.createElement("div",null,a.a.createElement(C.a,{defaultValue:e.default?e.default.city:null,error:e.errors.city.error,margin:"none",id:"city",label:"City",type:"city",variant:"filled",onChange:e.on_change("city"),helperText:e.errors.city.message})))},I=(r(116),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).on_submit=Object(w.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.make_submition_data(),e.next=3,n.submit(t,n.state.vendor_id);case 3:if(200!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",n.on_toggle());case 6:n.set_errors(r.body.errors);case 7:case"end":return e.stop()}}),e)}))),n.on_vendor_change=function(e){return function(t){var r=n.state.vendor_form;r[e]=t.target.value,n.setState({vendor_form:r})}},n.state={open:n.props.open,vendor_form:Object(y.a)({},F),vendor_errors:Object(y.a)({},L),vendor_id:null},n.on_toggle=e.on_toggle,n.submit=e.on_submit,n}return Object(u.a)(r,[{key:"componentWillReceiveProps",value:function(e){var t=e.vendors_data.filter((function(t){return e.selected[t.id]}))[0],r=t?t.id:null;this.setState({open:e.open,vendor_id:r,vendor_data:t,vendor_errors:Object(y.a)({},L)})}},{key:"set_errors",value:function(e){var t=this.get_vendor_errors(e);this.setState({vendor_errors:t})}},{key:"render",value:function(){return this.state.vendor_data?a.a.createElement(V.a,{disableBackdropClick:!0,open:this.state.open,onClose:this.on_toggle},a.a.createElement(q.a,null,"Modify ",this.state.vendor_data.name," Vendor"),a.a.createElement(N.a,null,a.a.createElement("form",null,a.a.createElement(M,{on_change:this.on_vendor_change,errors:this.state.vendor_errors,default:this.state.vendor_data}))),a.a.createElement(T.a,null,a.a.createElement(h.a,{onClick:this.on_toggle},"Cancel"),a.a.createElement(h.a,{onClick:this.on_submit},"Submit"))):a.a.createElement(a.a.Fragment,null)}},{key:"get_vendor_errors",value:function(e){return Object.keys(this.state.vendor_errors).reduce((function(t,r){return Object(y.a)(Object(E.a)({},r,{error:e.hasOwnProperty(r),message:e[r]&&e[r][0]}),t)}),{})}},{key:"make_submition_data",value:function(){return{vendor:R(this.state.vendor_form)}}},{key:"filter_null_and_blanks",value:function(e){return Object.keys(e).reduce((function(t,r){return Object(y.a)(Object(y.a)({},null!==e[r]&&""!==e[r]&&Object(E.a)({},r,e[r])),t)}),{})}}]),r}(a.a.Component)),J=(r(117),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).on_submit=Object(w.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.make_submition_data(),e.next=3,n.submit(t);case 3:if(201!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",n.on_toggle());case 6:n.set_errors(r.body.errors);case 7:case"end":return e.stop()}}),e)}))),n.on_vendor_change=function(e){return function(t){var r=n.state.vendor_form;r[e]=t.target.value,n.setState({vendor_form:r})}},n.on_product_change=function(e){return function(t){return function(r){console.log(e);var a=n.state.products_forms;a[e][t]=r.target.value,n.setState({products_forms:a})}}},n.on_new_product=function(){var e=n.state.products_forms.concat([Object(y.a)({},W)]),t=n.state.products_errors.concat([Object(y.a)({},D)]);n.products_number+=1,n.setState({products_forms:e,products_errors:t})},n.state={open:n.props.open,vendor_form:Object(y.a)({},F),products_forms:[],vendor_errors:Object(y.a)({},L),products_errors:[]},n.products_number=0,n.on_toggle=e.on_toggle,n.submit=e.on_submit,n}return Object(u.a)(r,[{key:"componentWillReceiveProps",value:function(e){e.open&&this.setState({vendor_errors:Object(y.a)({},L),vendor_form:Object(y.a)({},F),products_forms:[],products_errors:[]}),this.products_number=0,this.setState({open:e.open})}},{key:"set_errors",value:function(e){var t=this.get_vendor_errors(0===this.products_number?e:e.vendor),r=0===this.products_number?[]:this.get_products_errors(e.products);this.setState({vendor_errors:t,products_errors:r})}},{key:"render",value:function(){var e=this;return a.a.createElement(V.a,{disableBackdropClick:!0,open:this.state.open,onClose:this.on_toggle},a.a.createElement(q.a,null,"Create New Vendor"),a.a.createElement(N.a,null,a.a.createElement("form",null,a.a.createElement(G,{on_change:this.on_vendor_change,errors:this.state.vendor_errors}),a.a.createElement("div",{className:"products-forms"},this.state.products_forms.map((function(t,r){return a.a.createElement(U,{index:r,key:r,on_change:e.on_product_change(r),errors:e.state.products_errors[r]})}))))),a.a.createElement(T.a,null,a.a.createElement(h.a,{onClick:this.on_toggle},"Cancel"),a.a.createElement(h.a,{onClick:this.on_new_product},"Add Product"),a.a.createElement(h.a,{onClick:this.on_submit},"Submit")))}},{key:"get_vendor_errors",value:function(e){return Object.keys(this.state.vendor_errors).reduce((function(t,r){return Object(y.a)(Object(E.a)({},r,{error:e.hasOwnProperty(r),message:e[r]&&e[r][0]}),t)}),{})}},{key:"get_products_errors",value:function(e){return this.state.products_errors.map((function(t,r){return Object.keys(t).reduce((function(t,n){return Object(y.a)(Object(E.a)({},n,{error:e[r]&&e[r].hasOwnProperty(n),message:e[r]&&e[r][n]&&e[r][n][0]}),t)}),{})}))}},{key:"make_submition_data",value:function(){var e=R(this.state.vendor_form),t=this.state.products_forms.map((function(e){return R(e)}));return Object(y.a)({vendor:e},t.length>0&&{products:t})}}]),r}(a.a.Component)),G=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(g.a,null,"Vendor")),a.a.createElement(M,e))},U=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(g.a,null,"Product ",e.index+1)),a.a.createElement(B,e))},H=r(164),$=r(165),z=r(168),K=r(163),Q=r(166),X=r(167),Y=r(174),Z=function(e){return a.a.createElement(Q.a,null,a.a.createElement(X.a,{hover:!0},a.a.createElement(z.a,{padding:"checkbox"}),a.a.createElement(z.a,null,"Company"),a.a.createElement(z.a,{align:"right"},"CNPJ"),a.a.createElement(z.a,{align:"right"},"City")))},ee=function(e){return a.a.createElement(a.a.Fragment,null,(e.rows_per_page>0?e.vendors_data.slice(e.current_page*e.rows_per_page,(e.current_page+1)*e.rows_per_page):e.vendors_data).map((function(t){return a.a.createElement(X.a,{hover:!0,key:t.id,style:{cursor:"pointer"},role:"checkbox","aria-checked":e.selected[t.id],tabIndex:-1,selected:e.selected[t.id]},a.a.createElement(z.a,{padding:"checkbox"},a.a.createElement(Y.a,{checked:e.selected[t.id],onClick:function(r){return e.onCheck(r,t.id)},inputProps:{"aria-labelledby":t.id}})),a.a.createElement(z.a,{onClick:function(r){return e.onClick(r,t.id)}},t.name),a.a.createElement(z.a,{align:"right",onClick:function(r){return e.onClick(r,t.id)}},t.cnpj),a.a.createElement(z.a,{align:"right",onClick:function(r){return e.onClick(r,t.id)}},t.city||"Not Available"))})))},te=function(e){return a.a.createElement(K.a,null,a.a.createElement(H.a,{stickyHeader:!0,"aria-label":"sticky table"},a.a.createElement(Z,null),a.a.createElement($.a,null,a.a.createElement(ee,e))))},re=function(){function e(){Object(s.a)(this,e),this.id_to_terms={},this.data=[]}return Object(u.a)(e,null,[{key:"set_terms",value:function(t){e.data=t,e.id_to_terms=t.reduce((function(e,t){return Object(y.a)(Object(E.a)({},t.id,Object.keys(t).reduce((function(e,r){return"id"!==r&&t[r]?e.concat(t[r].toString().toLowerCase().split(" ")):e}),[])),e)}),{})}},{key:"get_ordered_records",value:function(t){var r=t.toLowerCase().split(" "),n=Object.keys(e.id_to_terms).reduce((function(t,n){return Object(y.a)(Object(E.a)({},n,e.calculate_score(e.id_to_terms[n],r)),t)}),{});return e.data.sort((function(e,t){return n[t.id]-n[e.id]}))}},{key:"calculate_score",value:function(e,t){return t.reduce((function(t,r){return e.includes(r)?t+1:t}),0)}}]),e}(),ne="https://vendor-product-api.herokuapp.com/api/",ae=function(e){return ne+"vendors"},oe=function(e){return ne+"vendors/".concat(e)},ce=function(e){return ne+"vendors/".concat(e,"/products")},se=function(e){return ne+"products"},ue=function(e){return ne+"products/".concat(e)},ie=function(e,t){return Object(y.a)({method:e,headers:{origin:"*"}},"GET"!==e&&{body:JSON.stringify(t)})},le=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{url:e(t.id),request:ie(t.method,r)}},de=function(){var e=Object(w.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,r);case 2:if(204!=(n=e.sent).status){e.next=5;break}return e.abrupt("return",{status:204,body:{}});case 5:return e.t0=n.status,e.next=8,n.json();case 8:return e.t1=e.sent,e.abrupt("return",{status:e.t0,body:e.t1});case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),_e=(r(118),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).make_vendor=function(){var e=Object(w.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post_vendor_request(t);case 2:if(201===(r=e.sent).status){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,n.get_vendors();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.modify_vendor=function(){var e=Object(w.a)(j.a.mark((function e(t,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.put_vendor_request(t,r);case 2:if(200===(a=e.sent).status){e.next=5;break}return e.abrupt("return",a);case 5:return n.setState({number_selected:0}),e.next=8,n.get_vendors();case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),n.remove_vendors=Object(w.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.vendors_data.reduce((function(e,t){return n.state.selected[t.id]?e.concat(t.id):e}),[]),e.next=3,n.delete_vendors_request({vendors:t});case 3:if(200===(r=e.sent).status){e.next=6;break}return e.abrupt("return",r);case 6:return n.clean_vendors(t),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),n.on_search=function(e){var t=e.target.value;null!==t&&""!==t&&n.setState({vendors_data:re.get_ordered_records(t)})},n.on_row_click=function(e,t){n.props.history.push("/vendors/".concat(t))},n.on_row_check=function(e,t){var r=Object(y.a)(Object(y.a)({},n.state.selected),{},Object(E.a)({},t,!n.state.selected[t])),a=n.state.number_selected+(r[t]?1:-1);n.setState({selected:r,number_selected:a})},n.on_page_change=function(e,t){n.setState({current_page:t})},n.on_rows_per_page_change=function(e){var t=parseInt(e.target.value,10);n.setState({current_page:0,rows_per_page:t})},n.toggle_create_dialog=function(){n.setState({create_dialog_open:!n.state.create_dialog_open})},n.toggle_modify_dialog=function(){n.setState({modify_dialog_open:!n.state.modify_dialog_open})},n.toggle_delete_dialog=function(){n.setState({delete_dialog_open:!n.state.delete_dialog_open})},e.set_view_name("Vendors View"),n.state={vendors_data:[],selected:{},number_selected:0,current_page:0,rows_per_page:10,delete_dialog_open:!1,create_dialog_open:!1,modify_dialog_opne:!1},n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get_vendors();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_vendors",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get_vendors_request();case 2:if(200==(t=e.sent).status){e.next=5;break}return e.abrupt("return");case 5:r=t.body.data,this.update_state_with(r),re.set_terms(this.state.vendors_data);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clean_vendors",value:function(e){var t=this.state.vendors_data.filter((function(t){return!e.includes(t.id)}));this.setState({number_selected:0}),this.update_state_with(t)}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(S.a,{className:"table-background"},a.a.createElement(C.a,{className:"search-bar",label:"Search",type:"string",variant:"filled",disabled:0===this.state.vendors_data.length,onChange:this.on_search}),a.a.createElement(te,Object.assign({},this.state,{onCheck:this.on_row_check,onClick:this.on_row_click})),a.a.createElement(x.a,{component:"div",count:this.state.vendors_data.length,rowsPerPage:this.state.rows_per_page,page:this.state.current_page,onChangePage:this.on_page_change,onChangeRowsPerPage:this.on_rows_per_page_change,rowsPerPageOptions:[10,25,{label:"All",value:-1}],SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}})),a.a.createElement(J,{on_submit:this.make_vendor,open:this.state.create_dialog_open,on_toggle:this.toggle_create_dialog}),a.a.createElement(I,{on_submit:this.modify_vendor,open:this.state.modify_dialog_open,vendors_data:this.state.vendors_data,selected:this.state.selected,on_toggle:this.toggle_modify_dialog}),a.a.createElement(A,{on_submit:this.remove_vendors,number_selected:this.state.number_selected,open:this.state.delete_dialog_open,on_toggle:this.toggle_delete_dialog}),a.a.createElement(P,{number_selected:this.state.number_selected,toggle_delete:this.toggle_delete_dialog,toggle_create:this.toggle_create_dialog,toggle_modify:this.toggle_modify_dialog}))}},{key:"update_state_with",value:function(e){var t=e.reduce((function(e,t){return Object(y.a)(Object(E.a)({},t.id,!1),e)}),{});re.set_terms(e),this.setState({vendors_data:e,selected:t,number_selected:0})}},{key:"get_vendors_request",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=le(ae,{method:"GET"}),e.next=3,de(t.url,t.request);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"post_vendor_request",value:function(){var e=Object(w.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=le(ae,{method:"POST"},t),e.next=3,de(r.url,r.request);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"put_vendor_request",value:function(){var e=Object(w.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=le(oe,{method:"PUT",id:r},t),e.next=3,de(n.url,n.request);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete_vendors_request",value:function(){var e=Object(w.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=le(ae,{method:"DELETE"},t),e.next=3,de(r.url,r.request);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(a.a.Component)),pe=(r(119),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).on_submit=Object(w.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.make_submition_data(),e.next=3,n.submit(t,n.state.product_id);case 3:if(200!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",n.on_toggle());case 6:n.set_errors(r.body.errors);case 7:case"end":return e.stop()}}),e)}))),n.on_product_change=function(e){return function(t){var r=n.state.product_form;r[e]=t.target.value,n.setState({product_form:r})}},n.state={open:n.props.open,product_form:Object(y.a)({},W),product_errors:Object(y.a)({},D),product_id:null},n.on_toggle=e.on_toggle,n.submit=e.on_submit,n}return Object(u.a)(r,[{key:"componentWillReceiveProps",value:function(e){var t=e.products_data.filter((function(t){return e.selected[t.id]}))[0],r=t?this.copy_data_to_form(t):Object(y.a)({},W),n=t?t.id:null;this.setState({open:e.open,product_form:r,product_data:t,product_id:n,product_errors:Object(y.a)({},D)})}},{key:"set_errors",value:function(e){var t=this.get_product_errors(e);this.setState({product_errors:t})}},{key:"render",value:function(){return this.state.product_data?a.a.createElement(V.a,{disableBackdropClick:!0,open:this.state.open,onClose:this.on_toggle},a.a.createElement(q.a,null,"Modify ",this.state.product_data.name," Product"),a.a.createElement(N.a,null,a.a.createElement("form",null,a.a.createElement(B,{on_change:this.on_product_change,errors:this.state.product_errors,default:this.state.product_data}))),a.a.createElement(T.a,null,a.a.createElement(h.a,{onClick:this.on_toggle},"Cancel"),a.a.createElement(h.a,{onClick:this.on_submit},"Submit"))):a.a.createElement(a.a.Fragment,null)}},{key:"get_product_errors",value:function(e){return Object.keys(this.state.product_errors).reduce((function(t,r){return Object(y.a)(Object(E.a)({},r,{error:e.hasOwnProperty(r),message:e[r]&&e[r][0]}),t)}),{})}},{key:"make_submition_data",value:function(){return{product:R(this.state.product_form)}}},{key:"copy_data_to_form",value:function(e){var t=this.state.product_form;return t.name=e.name,t.code=e.code,t.price=e.price,t}}]),r}(a.a.Component)),me=(r(120),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).on_submit=Object(w.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.make_submition_data(),e.next=3,n.submit(t);case 3:if(201!==(r=e.sent).status){e.next=6;break}return e.abrupt("return",n.on_toggle());case 6:n.set_errors(r.body.errors);case 7:case"end":return e.stop()}}),e)}))),n.on_product_change=function(e){return function(t){return function(r){var a=n.state.products_forms;a[e][t]=r.target.value,n.setState({products_forms:a})}}},n.on_new_product=function(){var e=n.state.products_forms.concat([Object(y.a)({},W)]),t=n.state.products_errors.concat([Object(y.a)({},D)]);n.products_number+=1,n.setState({products_forms:e,products_errors:t})},n.state={open:n.props.open,products_forms:[Object(y.a)({},W)],products_errors:[Object(y.a)({},D)]},n.products_number=1,n.on_toggle=e.on_toggle,n.submit=e.on_submit,n}return Object(u.a)(r,[{key:"componentWillReceiveProps",value:function(e){e.open&&this.setState({products_errors:[Object(y.a)({},D)],products_forms:[Object(y.a)({},W)]}),this.setState({open:e.open})}},{key:"set_errors",value:function(e){var t=this.get_products_errors(e.products);this.setState({products_errors:t})}},{key:"render",value:function(){var e=this;return a.a.createElement(V.a,{disableBackdropClick:!0,open:this.state.open,onClose:this.on_toggle},a.a.createElement(q.a,null,"Create New Products"),a.a.createElement(N.a,null,a.a.createElement("form",null,a.a.createElement("div",{className:"products-forms"},this.state.products_forms.map((function(t,r){return a.a.createElement(fe,{index:r,key:r,on_change:e.on_product_change(r),errors:e.state.products_errors[r]})}))))),a.a.createElement(T.a,null,a.a.createElement(h.a,{onClick:this.on_toggle},"Cancel"),a.a.createElement(h.a,{onClick:this.on_new_product},"Add Product"),a.a.createElement(h.a,{onClick:this.on_submit},"Submit")))}},{key:"get_products_errors",value:function(e){return this.state.products_errors.map((function(t,r){return Object.keys(t).reduce((function(t,n){return Object(y.a)(Object(E.a)({},n,{error:e[r]&&e[r].hasOwnProperty(n),message:e[r]&&e[r][n]&&e[r][n][0]}),t)}),{})}))}},{key:"make_submition_data",value:function(){return{products:this.state.products_forms.map((function(e){return R(e)}))}}}]),r}(a.a.Component)),fe=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement(g.a,null,"Product ",e.index+1)),a.a.createElement(B,e))},ge=function(e){return a.a.createElement(Q.a,null,a.a.createElement(X.a,{hover:!0},a.a.createElement(z.a,{padding:"checkbox"}),a.a.createElement(z.a,null,"Product Name"),a.a.createElement(z.a,{align:"right"},"UPC-A Code"),a.a.createElement(z.a,{align:"right"},"Price")))},he=function(e){return a.a.createElement(a.a.Fragment,null,(e.rows_per_page>0?e.products_data.slice(e.current_page*e.rows_per_page,(e.current_page+1)*e.rows_per_page):e.products_data).map((function(t){return a.a.createElement(X.a,{hover:!0,key:t.id,role:"checkbox","aria-checked":e.selected[t.id],tabIndex:-1,selected:e.selected[t.id]},a.a.createElement(z.a,{padding:"checkbox"},a.a.createElement(Y.a,{checked:e.selected[t.id],onClick:function(r){return e.onCheck(r,t.id)},inputProps:{"aria-labelledby":t.id}})),a.a.createElement(z.a,null,t.name),a.a.createElement(z.a,{align:"right"},t.code),a.a.createElement(z.a,{align:"right"},t.price||"Not Available"))})))},ve=function(e){return a.a.createElement(K.a,null,a.a.createElement(H.a,{stickyHeader:!0,"aria-label":"sticky table"},a.a.createElement(ge,null),a.a.createElement($.a,null,a.a.createElement(he,e))))},be=(r(121),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).make_products=function(){var e=Object(w.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.post_products_request(t);case 2:if(201===(r=e.sent).status){e.next=5;break}return e.abrupt("return",r);case 5:return e.next=7,n.get_products();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.modify_product=function(){var e=Object(w.a)(j.a.mark((function e(t,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.put_product_request(t,r);case 2:if(200===(a=e.sent).status){e.next=5;break}return e.abrupt("return",a);case 5:return n.setState({number_selected:0}),e.next=8,n.get_products();case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),n.remove_products=Object(w.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.products_data.reduce((function(e,t){return n.state.selected[t.id]?e.concat(t.id):e}),[]),e.next=3,n.delete_products_request({products:t});case 3:if(200===(r=e.sent).status){e.next=6;break}return e.abrupt("return",r);case 6:return n.clean_products(t),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),n.on_search=function(e){var t=e.target.value;null!==t&&""!==t&&n.setState({products_data:re.get_ordered_records(t)})},n.on_row_check=function(e,t){var r=Object(y.a)(Object(y.a)({},n.state.selected),{},Object(E.a)({},t,!n.state.selected[t])),a=n.state.number_selected+(r[t]?1:-1);n.setState({selected:r,number_selected:a})},n.on_page_change=function(e,t){n.setState({current_page:t})},n.on_rows_per_page_change=function(e){var t=parseInt(e.target.value,10);n.setState({current_page:0,rows_per_page:t})},n.toggle_create_dialog=function(){n.setState({create_dialog_open:!n.state.create_dialog_open})},n.toggle_modify_dialog=function(){n.setState({modify_dialog_open:!n.state.modify_dialog_open})},n.toggle_delete_dialog=function(){n.setState({delete_dialog_open:!n.state.delete_dialog_open})},n.set_view_name=n.props.set_view_name,n.state={products_data:[],vendor_data:{},selected:{},current_page:0,number_selected:0,rows_per_page:10,delete_dialog_open:!1,create_dialog_open:!1,modify_dialog_open:!1},n}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=Object(w.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vendor_id=this.props.match.params.vendor_id,e.next=3,this.get_products();case 3:return e.next=5,this.get_vendor();case 5:this.set_view_name("".concat(this.state.vendor_data.name," Products View"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_vendor",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get_vendor_request();case 2:t=e.sent,r=t.body.data,this.setState({vendor_data:r});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_products",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get_products_request();case 2:if(200==(t=e.sent).status){e.next=5;break}return e.abrupt("return");case 5:r=t.body.data,this.update_state_with(r),re.set_terms(this.state.products_data);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clean_products",value:function(e){var t=this.state.products_data.filter((function(t){return!e.includes(t.id)}));this.setState({number_selected:0}),this.update_state_with(t)}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(S.a,{className:"table-background"},a.a.createElement(C.a,{className:"search-bar",label:"Search",type:"string",variant:"filled",disabled:0===this.state.products_data.length,onChange:this.on_search}),a.a.createElement(ve,Object.assign({},this.state,{onCheck:this.on_row_check,onClick:this.on_row_click})),a.a.createElement(x.a,{component:"div",count:this.state.products_data.length,rowsPerPage:this.state.rows_per_page,page:this.state.current_page,onChangePage:this.on_page_change,onChangeRowsPerPage:this.on_rows_per_page_change,rowsPerPageOptions:[10,25,{label:"All",value:-1}],SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0}})),a.a.createElement(me,{on_submit:this.make_products,open:this.state.create_dialog_open,on_toggle:this.toggle_create_dialog}),a.a.createElement(pe,{on_submit:this.modify_product,open:this.state.modify_dialog_open,products_data:this.state.products_data,selected:this.state.selected,on_toggle:this.toggle_modify_dialog}),a.a.createElement(A,{on_submit:this.remove_products,number_selected:this.state.number_selected,open:this.state.delete_dialog_open,on_toggle:this.toggle_delete_dialog}),a.a.createElement(P,{number_selected:this.state.number_selected,toggle_delete:this.toggle_delete_dialog,toggle_create:this.toggle_create_dialog,toggle_modify:this.toggle_modify_dialog}))}},{key:"update_state_with",value:function(e){var t=e.reduce((function(e,t){return Object(y.a)(Object(E.a)({},t.id,!1),e)}),{});re.set_terms(e),this.setState({products_data:e,selected:t,number_selected:0})}},{key:"get_vendor_request",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=le(oe,{method:"GET",id:this.vendor_id}),e.next=3,de(t.url,t.request);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_products_request",value:function(){var e=Object(w.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=le(ce,{method:"GET",id:this.vendor_id}),e.next=3,de(t.url,t.request);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"post_products_request",value:function(){var e=Object(w.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=le(ce,{method:"POST",id:this.vendor_id},t),e.next=3,de(r.url,r.request);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"put_product_request",value:function(){var e=Object(w.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=le(ue,{method:"PUT",id:r},t),e.next=3,de(n.url,n.request);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"delete_products_request",value:function(){var e=Object(w.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=le(se,{method:"DELETE",id:this.vendor_id},t),e.next=3,de(r.url,r.request);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(a.a.Component)),ke=Object(_.g)(be),Ee=r(80),ye=Object(Ee.a)({palette:{type:"dark",primary:{light:"#6d6d6d",main:"#424242",dark:"#2b2b2b",contrastText:"#f0f0f0"},secondary:{light:"#8e8e8e",main:"#616161",dark:"#373737",contrastText:"#000"}},red:"#ff3232",green:"#5cb65c"}),Oe=(r(122),function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.call(this)).set_view_name=function(t){e.setState({view_name:t})},e.state={view_name:"Vendors View",backdrop_open:!1},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return a.a.createElement(p.a,{theme:ye},a.a.createElement(d.a,null,a.a.createElement(k,{view_name:this.state.view_name}),a.a.createElement("div",{className:"spacer"}),a.a.createElement(_.d,null,a.a.createElement(_.b,{exact:!0,path:"/vendors/",render:function(t){return a.a.createElement(_e,Object.assign({},t,{set_view_name:e.set_view_name}))}}),a.a.createElement(_.b,{exact:!0,path:"/vendors/:vendor_id/",render:function(t){return a.a.createElement(ke,{set_view_name:e.set_view_name})}}),a.a.createElement(_.a,{to:"/vendors/"}))))}}]),r}(a.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[101,1,2]]]);
//# sourceMappingURL=main.5dcdce96.chunk.js.map